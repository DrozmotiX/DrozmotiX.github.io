<!DOCTYPE html>
<html lang="de-DE">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>YAML Vorlagen | DrozmotiX-OSS | OpenSource support f√ºr SmartHome L√∂sungen</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Wir lieben es wissen zu teilen und hoffen, dass diese Website Ihnen dabei hilft, Ihren Weg zur Verwirklichung Ihrer pers√∂nlichen Smart Home-L√∂sung zu finden">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.bc9eb68e.css" as="style"><link rel="preload" href="/assets/js/app.03708dee.js" as="script"><link rel="preload" href="/assets/js/2.c6b024d0.js" as="script"><link rel="preload" href="/assets/js/32.9b407c87.js" as="script"><link rel="prefetch" href="/assets/js/10.134b9c64.js"><link rel="prefetch" href="/assets/js/11.046fb9f7.js"><link rel="prefetch" href="/assets/js/12.777664c0.js"><link rel="prefetch" href="/assets/js/13.ed0341b2.js"><link rel="prefetch" href="/assets/js/14.d648b105.js"><link rel="prefetch" href="/assets/js/15.8a4e8fd3.js"><link rel="prefetch" href="/assets/js/16.188c0426.js"><link rel="prefetch" href="/assets/js/17.59db25fe.js"><link rel="prefetch" href="/assets/js/18.0dfb075e.js"><link rel="prefetch" href="/assets/js/19.2ca8611d.js"><link rel="prefetch" href="/assets/js/20.6d9fd665.js"><link rel="prefetch" href="/assets/js/21.dc72b706.js"><link rel="prefetch" href="/assets/js/22.6fcfcebc.js"><link rel="prefetch" href="/assets/js/23.6d96885d.js"><link rel="prefetch" href="/assets/js/24.ce2ea4d9.js"><link rel="prefetch" href="/assets/js/25.f4ee8e42.js"><link rel="prefetch" href="/assets/js/26.b89356e2.js"><link rel="prefetch" href="/assets/js/27.a107b8b3.js"><link rel="prefetch" href="/assets/js/28.31983faa.js"><link rel="prefetch" href="/assets/js/29.f8deec00.js"><link rel="prefetch" href="/assets/js/3.12f51374.js"><link rel="prefetch" href="/assets/js/30.db3c7273.js"><link rel="prefetch" href="/assets/js/31.40e9e19f.js"><link rel="prefetch" href="/assets/js/33.01e49bb4.js"><link rel="prefetch" href="/assets/js/34.61307a23.js"><link rel="prefetch" href="/assets/js/35.80a76d48.js"><link rel="prefetch" href="/assets/js/36.8be7666e.js"><link rel="prefetch" href="/assets/js/37.6a7167a5.js"><link rel="prefetch" href="/assets/js/38.fb4f514e.js"><link rel="prefetch" href="/assets/js/39.5ae2968a.js"><link rel="prefetch" href="/assets/js/4.339654ff.js"><link rel="prefetch" href="/assets/js/40.c93ad50c.js"><link rel="prefetch" href="/assets/js/41.b87f23d6.js"><link rel="prefetch" href="/assets/js/42.397a7065.js"><link rel="prefetch" href="/assets/js/43.93b999d6.js"><link rel="prefetch" href="/assets/js/44.f4a6a364.js"><link rel="prefetch" href="/assets/js/45.2c9e5644.js"><link rel="prefetch" href="/assets/js/46.14d2a955.js"><link rel="prefetch" href="/assets/js/47.36e6318a.js"><link rel="prefetch" href="/assets/js/48.03201e67.js"><link rel="prefetch" href="/assets/js/49.c16aa524.js"><link rel="prefetch" href="/assets/js/5.9bf8de6f.js"><link rel="prefetch" href="/assets/js/50.53e4459d.js"><link rel="prefetch" href="/assets/js/51.ebba67dc.js"><link rel="prefetch" href="/assets/js/52.faed5d57.js"><link rel="prefetch" href="/assets/js/53.1ee9104d.js"><link rel="prefetch" href="/assets/js/54.3eb37ef1.js"><link rel="prefetch" href="/assets/js/55.c3bd328a.js"><link rel="prefetch" href="/assets/js/56.3eb8297f.js"><link rel="prefetch" href="/assets/js/57.a83fecb6.js"><link rel="prefetch" href="/assets/js/58.e057977f.js"><link rel="prefetch" href="/assets/js/59.48617d70.js"><link rel="prefetch" href="/assets/js/6.8fec88a3.js"><link rel="prefetch" href="/assets/js/60.70a0faa2.js"><link rel="prefetch" href="/assets/js/61.ee89e5db.js"><link rel="prefetch" href="/assets/js/62.7fbd7573.js"><link rel="prefetch" href="/assets/js/7.5f1287b9.js"><link rel="prefetch" href="/assets/js/8.1a901b92.js"><link rel="prefetch" href="/assets/js/9.ed0d8f48.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bc9eb68e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/languages/de/" class="home-link router-link-active"><!----> <span class="site-name">DrozmotiX-OSS | OpenSource support f√ºr SmartHome L√∂sungen</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Sprachen Menu" class="dropdown-title"><span class="title">Adapter</span> <span class="arrow down"></span></button> <button type="button" aria-label="Sprachen Menu" class="mobile-dropdown-title"><span class="title">Adapter</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/languages/de/BasicSetup/" class="nav-link">
  Basic Setup
</a></li><li class="dropdown-item"><!----> <a href="/languages/de/Adapter/" class="nav-link router-link-active">
  Adapter
</a></li></ul></div></div><div class="nav-item"><a href="http://paypal.me/DutchmanNL" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Unterst√ºtze mich
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Sprachen</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Sprachen</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Deutsch
</a></li></ul></div></div> <a href="https://github.com/DrozmotiX/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Sprachen Menu" class="dropdown-title"><span class="title">Adapter</span> <span class="arrow down"></span></button> <button type="button" aria-label="Sprachen Menu" class="mobile-dropdown-title"><span class="title">Adapter</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/languages/de/BasicSetup/" class="nav-link">
  Basic Setup
</a></li><li class="dropdown-item"><!----> <a href="/languages/de/Adapter/" class="nav-link router-link-active">
  Adapter
</a></li></ul></div></div><div class="nav-item"><a href="http://paypal.me/DutchmanNL" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Unterst√ºtze mich
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Sprachen</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Sprachen</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Deutsch
</a></li></ul></div></div> <a href="https://github.com/DrozmotiX/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/languages/de/_Overview/" class="sidebar-link">Overview</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/languages/de/BasicSetup/" class="sidebar-heading clickable"><span>My Personal Setup</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-0"><a href="/languages/de/Adapter/" class="sidebar-heading clickable router-link-active open"><span>Adapter</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/languages/de/Adapter/ESPHome/" class="sidebar-heading clickable router-link-active open"><span>ESPHome</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/de/Adapter/ESPHome/01.basics.html" class="sidebar-link">Erste Schritte</a></li><li><a href="/languages/de/Adapter/ESPHome/02.supportedTypes.html" class="sidebar-link">Unterst√ºtzte Typen</a></li><li><a href="/languages/de/Adapter/ESPHome/03.adapterConfig.html" class="sidebar-link">Adapter-Konfiguration</a></li><li><a href="/languages/de/Adapter/ESPHome/04.myFirstDevice.html" class="sidebar-link">Mein erstes Ger√§t</a></li><li><a href="/languages/de/Adapter/ESPHome/05.configExample.html" class="sidebar-link">Konfigurations Beispiel</a></li><li><a href="/languages/de/Adapter/ESPHome/06.migration.html" class="sidebar-link">Tasmota / ESPEasy migrieren</a></li><li><a href="/languages/de/Adapter/ESPHome/07.flashBinary.html" class="sidebar-link">Flashen per USB</a></li><li><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html" aria-current="page" class="active sidebar-link">YAML Vorlagen</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#secrets-yaml" class="sidebar-link">SECRETS.YAML</a></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#faq" class="sidebar-link">FAQ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#api" class="sidebar-link">api:</a></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#ota" class="sidebar-link">ota:</a></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#substitutions" class="sidebar-link">substitutions</a></li></ul></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#blitzwolf" class="sidebar-link">BLITZWOLF</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#shp7" class="sidebar-link">SHP7</a></li></ul></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#gosund" class="sidebar-link">Gosund</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#sp1" class="sidebar-link">SP1</a></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#sp111" class="sidebar-link">SP111</a></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#sp112-bl0937" class="sidebar-link">SP112 BL0937</a></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#sp112-cse7766" class="sidebar-link">SP112 CSE7766</a></li></ul></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#teckin" class="sidebar-link">Teckin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#sp10" class="sidebar-link">SP10</a></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#sp20" class="sidebar-link">SP20</a></li></ul></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#sonoff" class="sidebar-link">Sonoff</a></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#shelly" class="sidebar-link">Shelly</a></li><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#vansware" class="sidebar-link">Vansware</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/languages/de/Adapter/ESPHome/08.yamlTemplates.html#vansware-plug-with-led-ring" class="sidebar-link">VANSWARE Plug (with LED Ring)</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/languages/de/Adapter/Klipper-Moonraker/" class="sidebar-heading clickable"><span>Klipper-Moonraker</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/languages/de/Adapter/SourceAnalytix/" class="sidebar-heading clickable"><span>SourceAnalytix</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/languages/de/Adapter/Tado/" class="sidebar-heading clickable"><span>Tado</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="yaml-vorlagen"><a href="#yaml-vorlagen" class="header-anchor">#</a> YAML Vorlagen</h1> <p>Um euch den einstieg in ESPHome zu erleichtern findet ihr hier, mit grossen dank an fleissiegen Helfern, einige Beispiele fuer weit verbreitete geraete.</p> <div class="custom-block danger"><p class="custom-block-title">Achtung</p> <p>Es <em>extrem</em> wichtig die Einstellungen zu √ºberpr√ºfen, wenn man etwas in der eigentlichen YAML-Konfiguration vergisst, kann es leider passieren das man sich erst einmal vom Ger√§t ausschlie√üt.</p></div> <h2 id="secrets-yaml"><a href="#secrets-yaml" class="header-anchor">#</a> SECRETS.YAML</h2> <p>Die &quot;SECRETS.YAML&quot; erm√∂glicht es dir, oft genutzte Konfigurationen schnell und effizient zu hinterlegen.
Die meisten Einstellungen wiederholen sich f√ºr die meisten Module, z.B. WLAN SSID, WLAN Passw√∂rter, API Zugang etc.
Darum sollten die wichtigsten Einstellungen direkt dort hinterlegt werden, so l√§uft man nicht direkt Gefahr etwas vergessen zu haben.</p> <div class="custom-block tip"><p class="custom-block-title">Kann ich die Einstellungen nicht auch in der YAML-Konfiguration direkt vornehmen?</p> <p>Selbstverst√§ndlich! - ABER: Du musst dann in jeder Konfiguration die richtigen Einstellungen immer und immer wieder eintragen.<br>
Ist es nicht sch√∂ner einfach ein paar grunds√§tzliche Sachen schnell per Copy+Paste in der Konfiguration einzuf√ºgen?</p></div> <details><summary> SECRETS.YAML Vorlage anzeigen
</summary> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>Folgende Punkte <em>SOLLTEN</em> auf jeden Fall in eurer SECRETS.YAML vor dem flashen zu finden sein:</p></div> <div class="language- extra-class"><pre><code># Over The Air
ota_password: &quot;esphomeota&quot;          # Passwort um per &quot;Over-the-Air&quot; ein Update durchf√ºhren zu k√∂nnen

# API Access
api_password: &quot;esphomeapi&quot;              # Passwort zum aktivieren der ESPHome API, zur Steuerung z.b. √ºber IOBroker, Logging etc.

# WiFi
wifi_ssid:        &quot;SSID eures WLANs&quot;                    # Damit verbinden sich eure ESP Home Devices beim Reboot
wifi_password:    &quot;PASSWORT eures WLANs&quot;    # das Passwort geh√∂rt zur gew√ºnschten SSID
ip_gateway:       192.168.0.254                        # Falls ihr manuelle IPs vergeben wollt, k√∂nnen hier die grundlegenden
ip_netmask:       255.255.255.0                           # Konfigurationen vorgenommen werden. Diese stehen dann in den Configs
ip_dns_1:         8.8.8.8                                       # als Platzhalter zur Verf√ºgung.
ip_dns_2:         192.168.0.254                            
ip_domain:        .local
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">OPTIONAL</p> <p>In einigen der Vorlagen findet Ihr Informationen f√ºr die manuelle IP Vergabe.
An dieser Stelle wird eine kurze √úbersicht gezeigt, wie man sich schnell und √ºbersichtlich seine Ger√§te einpflegen kann.
Es m√ºssen bei der Verwendung dann nur minimale √Ñnderungen in der eigentlichen YAML-Konfiguration vorgenommen werden.</p></div> <div class="language- extra-class"><pre><code># Device-List Gosund SP1
IP-Konfiguration            IP                     # Device-Name           Kommentar
ip_gosund_sp1_1:      192.168.0.41   # Gosund_SP1_1      - Laserdrucker
ip_gosund_sp1_2:      192.168.0.42   # Gosund_SP1_2      - 3D Drucker
ip_gosund_sp1_3:      192.168.0.43   # Gosund_SP1_3      - Reserve #3
ip_gosund_sp1_4:      192.168.0.44   # Gosund_SP1_4      - Reserve #4

# Device-List Gosund SP112
ip_gosund_sp112_1:    192.168.0.40   # Gosund_SP112_1    - PC/USV
ip_gosund_sp112_2:    192.168.0.45   # Gosund_SP112_2    - Reserve

# Device-List Blitzwolf SHP7
ip_blitzwolf_shp7_1:  192.168.0.31   # Blitzwolf_SHP7_1  - Reserve
ip_blitzwolf_shp7_2:  192.168.0.32   # Blitzwolf_SHP7_2  - Reserve
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">OPTIONAL</p> <p>An erster Stelle ist der Platzhalter f√ºr die Konfiguration, dann folgt die manuelle IP-Zuweisung f√ºr das Ger√§t.
Zur Vereinfachung nutzen wir das # - Zeichen als Kommentar und tragen dort ggf. noch den Friendly-Name des Moduls sowie eine sinnvolle Bezeichnung ein.</p></div></details> <h2 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h2> <h3 id="api"><a href="#api" class="header-anchor">#</a> api:</h3> <p>Eine der wichtigsten Einstellungen √ºberhaupt. Diese erm√∂glicht den Zugriff auf das Modul zur Steuerung, ohne diese interne Modul-API macht das ESPHome keinen Sinn.</p> <h3 id="ota"><a href="#ota" class="header-anchor">#</a> ota:</h3> <p>Ebenfalls eine sehr wichtige Einstellung. Diese erm√∂glicht den Zugriff auf das Modul zum updaten &quot;Over-The-Air (OTA)&quot;. Das Modul erlaubt das √§ndern der Konfiguration (Updates, neue Features etc.) √ºber einen direkten Upload zum Modul.</p> <h3 id="substitutions"><a href="#substitutions" class="header-anchor">#</a> substitutions</h3> <p>device_id - Das ist die sogenannte &quot;Unique-ID&quot;, ein einmaliges Erkennungszeichen f√ºr das Modul. Nur Kleinschreibung, keine Sonderzeichen (au√üer _ Unterstrich) !
device_name - Der Name der in diversen Kategorien erscheint (z.b. IoBroker). Nur Kleinschreibung, keine Sonderzeichen (au√üer _ Unterstrich)!
friendly_name - Der Name f√ºr das Modul zur schnellen Identifizierung - Hier ist Gro√ü- und Kleinschreibung, sowie _ Unterstrich und - Minus erlaubt üòÉ</p> <p>Unter Substitutions finden sich manchmal auch current_res und voltage_div?</p> <ul><li><p>current_res:<br>
Die Faktor-Berechnung f√ºr den Stromverbrauch im Watt Bereich. Die Kalibrierung ist individuell f√ºr jedes Modul anzupassen. Die Werte weichen bei jedem Modul mitunter massiv ab, es gibt keine groben Richtwerte.
Wenn eure Watt-Werte zu hoch sind, dann ist der Wert nach oben (!) zu korrigieren (Beispiel: 10 Watt werden genutzt, die Messung zeigt 15 Watt an, dann den Wert nach oben korrigieren)
Wenn eure Watt-Werte zu niedrig sind, dann ist der Wert nach unten (!) zu korrigieren. (Beispiel: 10 Watt werden genutzt, die Messung zeigt 8 Watt an, dann den Wert nach unten korrigieren)</p></li> <li><p>voltage_div:
Die Faktor-Berechnung f√ºr die Spannungmessung.
Wenn eure Volt-Werte zu hoch sind, dann ist der Wert nach oben zu korrigieren (Beispiel: 226V an der Steckdose, die Messung zeigt 240V, dann den Wert nach unten korrigieren)
Wenn eure Volt-Werte zu niedrig sind, dann ist der Wert nach unten zu korrigieren (Beispiel: 226V an der Steckdose, die Messung zeigt 220V, dann den Wert nach oben korrigieren)</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">Kalibrierung</p> <p>Eine 100%-tige Kalibrierung ist sehr aufwendig und mit herk√∂mmlichen Messger√§ten kaum zu ermitteln. Dennoch lassen sich die Module auf einen relativ genauen Wert justieren.
Dazu einfach mit einem Wert anfangen (z.b. &quot;current_res&quot;) und euer Modul per Upload neu flashen. Zur Ermittlung sollte man ein adequates Messger√§t benutzen und ein Ger√§t was eine relativ konstante Leistung abgibt (z.b 60 Watt Gl√ºhbirne oder √§hnliches).
Danach auf die gleiche Weise mit (z.b. &quot;voltage_div&quot;) vorgehen.
Immer daran denken - es kann und wird im Leistungsbereich immer mal Abweichungen geben. Die Messungen erfolgen nicht in Echtzeit in den Modulen und es gibt immer Toleranzen in den Chips.</p></div> <div class="custom-block warning"><p class="custom-block-title">ADVANCED USERS</p> <p>Ein englisches Tutorial findet ihr unter:
Calibrate Power Source: https://frenck.dev/calibrating-an-esphome-flashed-power-plug/</p></div> <h2 id="blitzwolf"><a href="#blitzwolf" class="header-anchor">#</a> BLITZWOLF</h2> <h3 id="shp7"><a href="#shp7" class="header-anchor">#</a> SHP7</h3> <details><summary> Vorlage anzeigen
</summary> <div class="language- extra-class"><pre><code>####
#
# Configuration File for BLITZWOLF SHP7 (Dual Plug)
# - If you switch from Tasmota - check if you have HLW8012 in your template then this config can be used.
#
# Notices:
# ========
# - There are different versions of SP112 / SHP5, they differ with other GPIO-Pinouts and other sensor platforms!
# - You have to create a &quot;SECRETS.YAML&quot; first (!) and VALIDATE (!) this configuration before uploading to plug!!!
#
# Useful Links:
# ========
# Calibrate Power Source: https://frenck.dev/calibrating-an-esphome-flashed-power-plug/
# To finetune your wattage/voltage measurement, check the substitutions &quot;current_res / voltage_div&quot;
#
# Builddate: 14.04.2021 by X-R4Y
#
####
substitutions:
device_id:      blitzwolf_shp7  # Device-ID Unique (only lowercase!)
device_name:    blitzwolf_shp7  # Device-Type for Category (only lowercase!)
friendly_name:  blitzwolf_shp7  # Device-Name for Channel (Lower-/Uppercase allowed)
current_res:    '0.001906'        # Higher value gives lower watt readout (Default 0.001906)
voltage_div:    '912'             # Lower value gives lower voltage readout (Default 912 ~ 226V)

esphome:
name: $device_name
platform: ESP8266
arduino_version: 2.5.1
board: esp8285

wifi:
ssid:         !secret wifi_ssid
password:     !secret wifi_password
fast_connect: on                  # Useful if WIFI-SSID is hidden

# Optional manual IP
#  manual_ip:
#    static_ip:  !secret ip_blitzwolf_shp7
#    gateway:    !secret ip_gateway
#    subnet:     !secret ip_netmask
#    dns1:       !secret ip_dns_1
domain:       !secret ip_domain

# Enable fallback hotspot (captive portal) in case wifi connection fails
#  ap:
#    ssid: $device_name_Hotspot_Fallback
#    password: &quot;fallback&quot;

# Enable if you wish to have a minimalistic web-interface for your device
#web_server:
#  port: 80

logger:
baud_rate: 0

api:
password: !secret api_password

ota:
password: !secret ota_password

sensor:
- platform: hlw8012
  sel_pin:
  number: GPIO03
  inverted: true
  cf_pin: GPIO04
  cf1_pin: GPIO05
  current_resistor: ${current_res}
  voltage_divider: ${voltage_div}

  current:
  id: current
  name: ${friendly_name}_Current
  unit_of_measurement: 'A'
  accuracy_decimals: 3

  voltage:
  id: voltage
  name: ${friendly_name}_Voltage
  unit_of_measurement: 'V'
  accuracy_decimals: 1

  power:
  id: wattage
  name: ${friendly_name}_Power
  unit_of_measurement: W
  accuracy_decimals: 2
  filters:
  - lambda: return (x / 2.2);
  change_mode_every: 4
  update_interval: 10s

  energy:
  name: ${friendly_name}_Energy
  unit_of_measurement: &quot;Wh&quot;

- platform: total_daily_energy
  power_id: wattage
  name: ${friendly_name}_Daily_Energy
  unit_of_measurement: kWh
  filters:
  # Multiplication factor from W to kW is 0.001
  - multiply: 0.001

- platform: wifi_signal
  name: ${friendly_name}_WiFi_Information
  update_interval: 60s

- platform: uptime
  id: uptime_sensor
  name: ${friendly_name}_Uptime_Information
  update_interval: 60s
  on_raw_value:
  then:
  - text_sensor.template.publish:
  id: uptime_readable
  state: !lambda |-
  int seconds = round(id(uptime_sensor).raw_state);
  int days = seconds / (24 * 3600);
  seconds = seconds % (24 * 3600);
  int hours = seconds / 3600;
  seconds = seconds % 3600;
  int minutes = seconds /  60;
  seconds = seconds % 60;
  return (
  (days ? String(days) + &quot;d &quot; : &quot;&quot;) +
  (hours ? String(hours) + &quot;h &quot; : &quot;&quot;) +
  (minutes ? String(minutes) + &quot;m &quot; : &quot;&quot;) +
  (String(seconds) + &quot;s&quot;)
  ).c_str();

binary_sensor:
- platform: gpio
  id: hw_button1
  name: hw_button1
  internal: true
  pin:
  number: GPIO0
  mode: INPUT_PULLUP
  inverted: true
  on_press:
  - switch.toggle: relay1

- platform: gpio
  id: hw_button2
  name: hw_button2
  internal: true
  pin:
  number: GPIO12
  mode: INPUT_PULLUP
  inverted: true
  on_press:
  - switch.toggle: relay2

output:
- platform: esp8266_pwm
  id: red_led1
  pin:
  number: GPIO13
  inverted: true
- platform: esp8266_pwm
  id: red_led2
  pin:
  number: GPIO2
  inverted: true

switch:
- platform: gpio
  pin: GPIO14
  id: relay1
  name: ${friendly_name}_Relay_1
  on_turn_on:
  - output.turn_on: red_led1
    on_turn_off:
  - output.turn_off: red_led1
- platform: gpio
  pin: GPIO16
  id: relay2
  name: ${friendly_name}_Relay_2
  on_turn_on:
  - output.turn_on: red_led2
    on_turn_off:
  - output.turn_off: red_led2

- platform: template
  id: relay_combined
  name: ${friendly_name}_Combined_Relay
  optimistic: true
  turn_off_action:
  - output.turn_off: red_led1
  - output.turn_off: red_led2
  - switch.turn_off: relay1
  - switch.turn_off: relay2
    turn_on_action:
  - output.turn_on: red_led1
  - output.turn_on: red_led2
  - switch.turn_on: relay1
  - switch.turn_on: relay2

# ==============
# !!! Notice !!!
# ==============
# If enabled, the Blue LED will flash while transmitting data (Power Measuring, Statusmessages and such stuff)
# If disabled, you wont get any error flashings on the LED from the plug. (Default)
# To enable the status LED feature put # in front of the following 4 lines
#status_led:
#  pin:
#    number: GPIO01
#    inverted: true

# Enable time component to reset energy at midnight
time:
- platform: sntp                        # Uses NTP protocol for time information
  id: my_time                           # Uses my local time from compiling

text_sensor:
- platform: template
  name: ${friendly_name}_Uptime         # Enable Uptime-Sensor in readable format    
  id: uptime_readable
  icon: mdi:clock-start
- platform: version
  name: ${friendly_name}_version        # Show module Version in structure
- platform: wifi_info
  ip_address:
  name: ${friendly_name}_ip           # Show WIFI IP-address in structure
  ssid:
  name: ${friendly_name}_ssid         # Show WIFI SSID in structure
  bssid:
  name: ${friendly_name}_bssid        # Show WIFI BSSID in structure
</code></pre></div></details> <h2 id="gosund"><a href="#gosund" class="header-anchor">#</a> Gosund</h2> <h3 id="sp1"><a href="#sp1" class="header-anchor">#</a> SP1</h3> <details><summary> Vorlage anzeigen
</summary> <div class="language- extra-class"><pre><code>####
#
# Configuration File for GOSUND SP1
# - If you switch from Tasmota - check if you have HLW8012 in your template then this config can be used.
#
# Notices:
# ========
# - There are different versions of SP1, they differ with other GPIO-Pinouts and other sensor platforms!
# - You have to create a &quot;SECRETS.YAML&quot; first (!) and VALIDATE (!) this configuration before uploading to plug!!!
#
# Useful Links:
# ========
# Calibrate Power Source: https://frenck.dev/calibrating-an-esphome-flashed-power-plug/
# To finetune your wattage/voltage measurement, check the substitutions &quot;current_res / voltage_div&quot;
#
# Builddate: 14.04.2021 by X-R4Y
#
####
substitutions:
device_id:      gosund_sp1      # Device-ID Unique
device_name:    gosund_sp1  # Device-Type for Category
friendly_name:  gosund_sp1 # Device-Name for Channel
current_res:    '0.001906'        # Higher value gives lower watt readout (Default 0.001906)
voltage_div:    '960'             # Lower value gives lower voltage readout

esphome:
name: $device_name
platform: ESP8266
board: esp8285

wifi:
ssid:         !secret wifi_ssid
password:     !secret wifi_password
fast_connect: on

# Optional manual IP
#  manual_ip:
#    static_ip:  !secret ip_gosund_sp1
#    gateway:    !secret ip_gateway
#    subnet:     !secret ip_netmask
#    dns1:       !secret ip_dns_1
domain:       !secret ip_domain

# Enable fallback hotspot (captive portal) in case wifi connection fails
#  ap:
#    ssid: $device_name_Hotspot_Fallback
#    password: &quot;fallback&quot;

# Enable if you wish to have a minimalistic web-interface for your device
#web_server:
#  port: 80

logger:
# https://esphome.io/components/logger

api:
password: !secret api_password

ota:
password: !secret ota_password

sensor:
- platform: hlw8012
  # https://esphome.io/components/sensor/hlw8012.html
  # current, power, voltage can all use sensor options https://esphome.io/components/sensor/#config-sensor
  sel_pin:
  number: GPIO12
  inverted: True
  cf_pin: GPIO5
  cf1_pin: GPIO14

  current:
  name: ${friendly_name}_Current
  unit_of_measurement: A
  accuracy_decimals: 3

  power:
  name: ${friendly_name}_Power
  id: power_monitor_value
  unit_of_measurement: W
  accuracy_decimals: 2
  filters:
  - lambda: return (x / 2.2);

  voltage:
  name: ${friendly_name}_Voltage
  unit_of_measurement: V
  accuracy_decimals: 2
  current_resistor: $current_res
  voltage_divider: $voltage_div
  change_mode_every: 5            # default 8
  update_interval: 15s            # default 60s

  energy:
  name: ${friendly_name}_Energy
  unit_of_measurement: &quot;Wh&quot;

- platform: total_daily_energy
  name: ${friendly_name}_Total_Daily_Energy
  power_id: power_monitor_value
  filters:
  - multiply: 0.001         # convert Wh to kWh
    unit_of_measurement: kWh

- platform: wifi_signal
  name: ${friendly_name}_WiFi_Information
  update_interval: 60s

- platform: uptime
  name: ${friendly_name}_Uptime_Information
  id: uptime_sensor
  update_interval: 60s
  on_raw_value:
  then:
  - text_sensor.template.publish:
  id: uptime_readable
  state: !lambda |-
  int seconds = round(id(uptime_sensor).raw_state);
  int days = seconds / (24 * 3600);
  seconds = seconds % (24 * 3600);
  int hours = seconds / 3600;
  seconds = seconds % 3600;
  int minutes = seconds /  60;
  seconds = seconds % 60;
  return (
  (days ? String(days) + &quot;d &quot; : &quot;&quot;) +
  (hours ? String(hours) + &quot;h &quot; : &quot;&quot;) +
  (minutes ? String(minutes) + &quot;m &quot; : &quot;&quot;) +
  (String(seconds) + &quot;s&quot;)
  ).c_str();

binary_sensor:
# Hardware Button at plug to turn on/off relay manually
- platform: gpio
  pin:
  number: GPIO13
  id: button
  name: ${friendly_name}_Button
  on_press:
  - switch.toggle: relay_template
    internal: True

output:
# Hardware LEDs: Blue and Red, triggering on different states
- platform: gpio
  id: red_led_output    # Status LED RED
  pin:
  number: GPIO0
  inverted: True

- platform: gpio
  id: blue_led_output   # Status LED BLUE
  pin:
  number: GPIO2
  inverted: True

switch:
# Hardware Relay: Relay that triggers the output plug
- platform: gpio
  pin: GPIO15
  id: relay

- platform: template
  name: ${friendly_name}_Relay
  id: relay_template
  lambda: |-
  if (id(relay).state) {
  return true;
  } else {
  return false;
  }
  turn_on_action:
  - output.turn_on: blue_led_output   # Turns on blue LED while relay on
  - output.turn_off: red_led_output   # Turns off red LED while relay on
  - switch.turn_on: relay             # Turns relay on
    turn_off_action:
  - output.turn_off: blue_led_output  # Turns off blue LED while relay off
  - output.turn_on: red_led_output    # Turns on red LED while relay off
  - switch.turn_off: relay            # Turns relay off

# ==============
# !!! Notice !!!
# ==============
# If enabled, the Red LED will not light up while relay is in off-state!
# To disable the status LED feature put # in front of the following 4 lines
# If disabled, you wont get any error flashings on the LED from the plug.
#status_led:
#  pin:
#    number: GPIO0                         # Default: RED GPIO0 / BLUE GPIO2
#    inverted: true

# Enable time component to reset energy at midnight
time:
- platform: sntp                        # Uses NTP protocol for time information
  id: my_time                           # Uses my local time from compiling

text_sensor:
- platform: template
  name: ${friendly_name}_Uptime         # Enable Uptime-Sensor in readable format    
  id: uptime_readable
  icon: mdi:clock-start
- platform: version
  name: ${friendly_name}_version        # Show module Version in structure
- platform: wifi_info
  ip_address:
  name: ${friendly_name}_ip           # Show WIFI IP-address in structure
  ssid:
  name: ${friendly_name}_ssid         # Show WIFI SSID in structure
  bssid:
  name: ${friendly_name}_bssid        # Show WIFI BSSID in structure
</code></pre></div></details> <h3 id="sp111"><a href="#sp111" class="header-anchor">#</a> SP111</h3> <details><summary> Vorlage anzeigen
</summary> <div class="language- extra-class"><pre><code>####
#
# Configuration File for GOSUND SP111
#
# Notices:
# ========
# - You have to create a &quot;SECRETS.YAML&quot; first (!) and VALIDATE (!) this configuration before uploading to plug!!!
#
# Useful Links:
# ========
# Calibrate Power Source: https://frenck.dev/calibrating-an-esphome-flashed-power-plug/
# To finetune your wattage/voltage measurement, check the substitutions &quot;current_res / voltage_div&quot;
#
# Builddate: 14.04.2021 by X-R4Y
#
####
substitutions:
device_id:      gosund_sp111      # Device-ID Unique
device_name:    gosund_sp111      # Device-Type for Category
friendly_name:  gosund_sp111      # Device-Name for Channel
current_res:    '0.0012'          # Higher value gives lower watt readout (Default 0.0012)
voltage_div:    '777'             # Lower value gives lower voltage readout

esphome:
name: $device_name
platform: ESP8266
board: esp8285

wifi:
ssid:         !secret wifi_ssid
password:     !secret wifi_password
fast_connect: on

# Optional manual IP
#  manual_ip:
#    static_ip:  !secret ip_gosund_sp1_1
#    gateway:    !secret ip_gateway
#    subnet:     !secret ip_netmask
#    dns1:       !secret ip_dns_1
domain:       !secret ip_domain

# Enable fallback hotspot (captive portal) in case wifi connection fails
#  ap:
#    ssid: $device_name_Hotspot_Fallback
#    password: &quot;fallback&quot;

# Enable if you wish to have a minimalistic web-interface for your device
#web_server:
#  port: 80

logger:
# https://esphome.io/components/logger

api:
password: !secret api_password

ota:
password: !secret ota_password

sensor:
- platform: hlw8012
  # https://esphome.io/components/sensor/hlw8012.html
  # current, power, voltage can all use sensor options https://esphome.io/components/sensor/#config-sensor
  sel_pin:
  number: GPIO12
  inverted: True
  cf_pin: GPIO5
  cf1_pin: GPIO14

  current:
  name: ${friendly_name}_Current
  unit_of_measurement: A
  accuracy_decimals: 3

  power:
  name: ${friendly_name}_Power
  id: power_monitor_value
  unit_of_measurement: W
  accuracy_decimals: 2
#      filters:
#      - multiply: 0.5
      filters:
        - lambda: return (x / 2.2);

    voltage:
      name: ${friendly_name}_Voltage
      unit_of_measurement: V
      accuracy_decimals: 2
    current_resistor: $current_res
    voltage_divider: $voltage_div
    change_mode_every: 3            # default 10
    update_interval: 10s            # default 60s

    energy:
      name: ${friendly_name}_Energy
      unit_of_measurement: &quot;Wh&quot;

- platform: total_daily_energy
  name: ${friendly_name}_Total_Daily_Energy
  power_id: power_monitor_value
  filters:
  - multiply: 0.001         # convert Wh to kWh
    unit_of_measurement: kWh

- platform: wifi_signal
  name: ${friendly_name}_WiFi_Information
  update_interval: 60s

- platform: uptime
  name: ${friendly_name}_Uptime_Information
  id: uptime_sensor
  update_interval: 60s
  on_raw_value:
  then:
  - text_sensor.template.publish:
  id: uptime_readable
  state: !lambda |-
  int seconds = round(id(uptime_sensor).raw_state);
  int days = seconds / (24 * 3600);
  seconds = seconds % (24 * 3600);
  int hours = seconds / 3600;
  seconds = seconds % 3600;
  int minutes = seconds /  60;
  seconds = seconds % 60;
  return (
  (days ? String(days) + &quot;d &quot; : &quot;&quot;) +
  (hours ? String(hours) + &quot;h &quot; : &quot;&quot;) +
  (minutes ? String(minutes) + &quot;m &quot; : &quot;&quot;) +
  (String(seconds) + &quot;s&quot;)
  ).c_str();

binary_sensor:
# Hardware Button at plug to turn on/off relay manually
- platform: gpio
  pin:
  number: GPIO13
  inverted: true
  id: button
  name: ${friendly_name}_Button
  on_press:
  - switch.toggle: relay_template
    internal: True

output:
# Relay state led
- platform: esp8266_pwm
  id: state_led
  pin:
  number: GPIO2
  inverted: true

light:
# Relay state light
- platform: monochromatic
  output: state_led
  id: led

switch:
# Hardware Relay: Relay that triggers the output plug
- platform: gpio
  pin: GPIO15
  id: relay

- platform: template
  name: ${friendly_name}_Relay
  id: relay_template
  lambda: |-
  if (id(relay).state) {
  return true;
  } else {
  return false;
  }
  turn_on_action:
  - light.turn_on: led      # Turns on blue LED while relay on
  - switch.turn_on: relay   # Turns relay on
    turn_off_action:
  - light.turn_off: led     # Turns off blue LED while relay off
  - switch.turn_off: relay  # Turns relay off

# ==============
# !!! Notice !!!
# ==============
# To disable the status LED feature put # in front of the following 4 lines
# If disabled, you wont get any error flashings on the LED from the plug.
status_led:
pin:
number: GPIO0                         # Default: RED GPIO0 / BLUE GPIO2
inverted: true

# Enable time component to reset energy at midnight
time:
- platform: sntp                        # Uses NTP protocol for time information
  id: my_time                           # Uses my local time from compiling

text_sensor:
- platform: template
  name: ${friendly_name}_Uptime         # Enable Uptime-Sensor in readable format    
  id: uptime_readable
  icon: mdi:clock-start
- platform: version
  name: ${friendly_name}_version        # Show module Version in structure
- platform: wifi_info
  ip_address:
  name: ${friendly_name}_ip           # Show WIFI IP-address in structure
  ssid:
  name: ${friendly_name}_ssid         # Show WIFI SSID in structure
  bssid:
  name: ${friendly_name}_bssid        # Show WIFI BSSID in structure
</code></pre></div></details> <h3 id="sp112-bl0937"><a href="#sp112-bl0937" class="header-anchor">#</a> SP112 BL0937</h3> <details><summary> Vorlage anzeigen
</summary> <div class="language- extra-class"><pre><code>####
#
# Configuration File for GOSUND SP112 / BLITZWOLF SHP5
# - If you switch from Tasmota - check if you have BL0937 on GPIO5, then this config can be used.
#
# Notices:
# ========
# - There are different versions of SP112 / SHP5, they differ with other GPIO-Pinouts and other sensor platforms!
# - You have to create a &quot;SECRETS.YAML&quot; first (!) and VALIDATE (!) this configuration before uploading to plug!!!
#
# Useful Links:
# ========
# Calibrate Power Source: https://frenck.dev/calibrating-an-esphome-flashed-power-plug/
#
# Builddate: 14.04.2021 by X-R4Y
#
####

substitutions:
device_id:      gosund_sp112  # Device-ID Unique (only lowercase!)
device_name:    gosund_sp112  # Device-Type for Category (only lowercase!)
friendly_name:  gosund_sp112  # Device-Name for Channel (Lower-/Uppercase allowed)

esphome:
name: $device_name
platform: ESP8266
arduino_version: 2.5.1
board: esp01_1m

wifi:
ssid:         !secret wifi_ssid
password:     !secret wifi_password
fast_connect: on

# Optional manual IP
#  manual_ip:
#    static_ip:  !secret ip_gosund_sp112_1
#    gateway:    !secret ip_gateway
#    subnet:     !secret ip_netmask
#    dns1:       !secret ip_dns_1
domain:       !secret ip_domain

# Enable fallback hotspot (captive portal) in case wifi connection fails
#  ap:
#    ssid: $device_name_Hotspot_Fallback
#    password: &quot;fallback&quot;

# Enable if you wish to have a minimalistic web-interface for your device
#web_server:
#  port: 80

api:
password: !secret api_password

ota:
password: !secret ota_password

logger:           # Reduce log level as otherwise logs would be flooded with analog sensor readings
logs:
sensor: ERROR # Options INFO / WARN / ERROR
adc: ERROR    # Options INFO / WARN / ERROR

sensor:
- platform: adc
  id: button_adc
  pin: A0
  update_interval: .1s
- platform: hlw8012
  sel_pin:
  number: GPIO12
  inverted: True
  cf_pin: GPIO05
  cf1_pin: GPIO04
  current:
  id: current
  name: ${friendly_name}_Current
  unit_of_measurement: A
  accuracy_decimals: 3

  voltage:
  id: voltage
  name: ${friendly_name}_Voltage
  unit_of_measurement: V
  accuracy_decimals: 1

  power:
  id: wattage
  name: ${friendly_name}_Power
  unit_of_measurement: W
  accuracy_decimals: 2
  filters:
  - lambda: return (x / 2.2);

- platform: total_daily_energy
  power_id: wattage
  name: ${friendly_name}_Daily_Energy
  unit_of_measurement: kWh
  filters:
  # Multiplication factor from W to kW is 0.001
  - multiply: 0.001

- platform: wifi_signal
  name: ${friendly_name}_WiFi_Information
  update_interval: 60s

- platform: uptime
  id: uptime_sensor
  name: ${friendly_name}_Uptime_Information
  update_interval: 60s
  on_raw_value:
  then:
  - text_sensor.template.publish:
  id: uptime_readable
  state: !lambda |-
  int seconds = round(id(uptime_sensor).raw_state);
  int days = seconds / (24 * 3600);
  seconds = seconds % (24 * 3600);
  int hours = seconds / 3600;
  seconds = seconds % 3600;
  int minutes = seconds /  60;
  seconds = seconds % 60;
  return (
  (days ? String(days) + &quot;d &quot; : &quot;&quot;) +
  (hours ? String(hours) + &quot;h &quot; : &quot;&quot;) +
  (minutes ? String(minutes) + &quot;m &quot; : &quot;&quot;) +
  (String(seconds) + &quot;s&quot;)
  ).c_str();

binary_sensor:
- platform: template
  id: hardwarebutton
  # read analog sensor and convert it's value to binary state
  lambda: return (id(button_adc).state &lt; .5);
  on_click:
  - min_length: 10ms        # short button press toggles mains (&lt; 250ms)
    max_length: 250ms
    then:
    - switch.toggle: switch_voltage
  - min_length: 500ms       # long button press toggles USB (&gt; 500ms up to 2 seconds)
    max_length: 2000ms
    then:
    - switch.toggle: switch_usb

output:
- platform: gpio
  id: red_led_output            # Red LED
  pin:
  number: GPIO00
  inverted: true

- platform: gpio
  id: blue_led_output           # Blue LED
  pin:
  number: GPIO02
  inverted: true

switch:
- platform: gpio
  name: ${friendly_name}_Relay_Voltage
  id: switch_voltage
  pin: GPIO14
  #inverted: true               # Some devices need this to be enabled
  on_turn_on:
  output.turn_on: red_led_output
  on_turn_off:
  output.turn_off: red_led_output

- platform: gpio
  name: ${friendly_name}_Relay_USB
  id: switch_usb
  pin: GPIO13
  inverted:  true
  on_turn_on:
  output.turn_on: blue_led_output
  on_turn_off:
  output.turn_off: blue_led_output

# ==============
# !!! Notice !!!
# ==============
# Enabled: the Red LED will not light up while relay is in off-state!
# Disabled: you wont get any error flashings on the LED from the plug.
# To disable the status LED feature put # in front of the following 4 lines
status_led:
pin:
number: GPIO2                         # Default: RED GPIO0 / BLUE GPIO2
inverted: true

# Enable time component to reset energy at midnight
time:
- platform: sntp                        # Uses NTP protocol for time information
  id: my_time                           # Uses my local time from compiling

text_sensor:
- platform: template
  name: ${friendly_name}_Uptime         # Enable Uptime-Sensor in readable format    
  id: uptime_readable
  icon: mdi:clock-start
- platform: version
  name: ${friendly_name}_version        # Show module Version in structure
- platform: wifi_info
  ip_address:
  name: ${friendly_name}_ip           # Show WIFI IP-address in structure
  ssid:
  name: ${friendly_name}_ssid         # Show WIFI SSID in structure
  bssid:
  name: ${friendly_name}_bssid        # Show WIFI BSSID in structure
</code></pre></div></details> <h3 id="sp112-cse7766"><a href="#sp112-cse7766" class="header-anchor">#</a> SP112 CSE7766</h3> <details><summary> Vorlage anzeigen
</summary> <div class="language- extra-class"><pre><code>####
#
# Configuration File for GOSUND SP112 / BLITZWOLF SHP5
# - If you switch from Tasmota - check if you have CSE7766 in your template then this config can be used.
#
# Notices:
# ========
# - There are different versions of SP112 / SHP5, they differ with other GPIO-Pinouts and other sensor platforms!
# - You have to create a &quot;SECRETS.YAML&quot; first (!) and VALIDATE (!) this configuration before uploading to plug!!!
#
# Useful Links:
# ========
# Calibrate Power Source: https://frenck.dev/calibrating-an-esphome-flashed-power-plug/
#
# Builddate: 14.04.2021 by X-R4Y
#
####

substitutions:
device_id:      gosund_sp112    # Device-ID Unique (only lowercase)
device_name:    gosund_sp112    # Device-Type for Category (only lowercase!)
friendly_name:  gosund_sp112    # Device-Name for Channel (Lower-/Uppercase allowed)

esphome:
name: $device_name
platform: ESP8266
board: esp8285

wifi:
ssid:         !secret wifi_ssid
password:     !secret wifi_password
fast_connect: on

# Optional manual IP
#  manual_ip:
#    static_ip:  !secret ip_gosund_sp112_1
#    gateway:    !secret ip_gateway
#    subnet:     !secret ip_netmask
#    dns1:       !secret ip_dns_1
domain:       !secret ip_domain

# Enable fallback hotspot (captive portal) in case wifi connection fails
#  ap:
#    ssid: $device_name_Hotspot_Fallback
#    password: &quot;fallback&quot;

# Enable if you wish to have a minimalistic web-interface for your device
#web_server:
#  port: 80

api:
password: !secret api_password

ota:
password: !secret ota_password

logger:           # Reduce log level as otherwise logs would be flooded with analog sensor readings
logs:
sensor: ERROR # Options INFO / WARN / ERROR
adc: ERROR    # Options INFO / WARN / ERROR

uart:
rx_pin: RX
baud_rate: 4800

sensor:
- platform: cse7766
  current:
  id: current
  name: ${friendly_name}_Current
  unit_of_measurement: A
  accuracy_decimals: 3

  voltage:
  id: voltage
  name: ${friendly_name}_Voltage
  unit_of_measurement: V
  accuracy_decimals: 1

  power:
  id: wattage
  name: ${friendly_name}_Power
  unit_of_measurement: W
  accuracy_decimals: 2
  filters:
  - lambda: return (x / 2.2);

- platform: total_daily_energy
  power_id: wattage
  name: ${friendly_name}_Daily_Energy
  unit_of_measurement: kWh
  filters:
  # Multiplication factor from W to kW is 0.001
  - multiply: 0.001

- platform: wifi_signal
  name: ${friendly_name}_WiFi_Information
  update_interval: 60s

- platform: uptime
  id: uptime_sensor
  name: ${friendly_name}_Uptime_Information
  update_interval: 60s
  on_raw_value:
  then:
  - text_sensor.template.publish:
  id: uptime_readable
  state: !lambda |-
  int seconds = round(id(uptime_sensor).raw_state);
  int days = seconds / (24 * 3600);
  seconds = seconds % (24 * 3600);
  int hours = seconds / 3600;
  seconds = seconds % 3600;
  int minutes = seconds /  60;
  seconds = seconds % 60;
  return (
  (days ? String(days) + &quot;d &quot; : &quot;&quot;) +
  (hours ? String(hours) + &quot;h &quot; : &quot;&quot;) +
  (minutes ? String(minutes) + &quot;m &quot; : &quot;&quot;) +
  (String(seconds) + &quot;s&quot;)
  ).c_str();

binary_sensor:
# Binary sensor for the hardware button press
- platform: gpio
  name: ${friendly_name}_button
  id: relay
  pin:
  number: GPIO16
  inverted: true
  internal: True
  on_press:
  - switch.toggle: switch_usb
  - switch.toggle: switch_voltage

output:
- platform: gpio
  id: red_led_output            # Red LED
  pin:
  number: GPIO00
  inverted: true

- platform: gpio
  id: blue_led_output           # Blue LED
  pin:
  number: GPIO02
  inverted: true

switch:
- platform: gpio
  name: ${friendly_name}_Relay_Voltage
  id: switch_voltage
  pin:
  number: GPIO14
#    inverted: true
on_turn_on:
output.turn_on: red_led_output
on_turn_off:
output.turn_off: red_led_output

- platform: gpio
  name: ${friendly_name}_Relay_USB
  id: switch_usb
  pin: GPIO5
  #inverted:  true
  on_turn_on:
  output.turn_on: blue_led_output
  on_turn_off:
  output.turn_off: blue_led_output

# ==============
# !!! Notice !!!
# ==============
# Enabled: the Red LED will not light up while relay is in off-state!
# Disabled: you wont get any error flashings on the LED from the plug.
# To disable the status LED feature put # in front of the following 4 lines
status_led:
pin:
number: GPIO2                         # Default: RED GPIO0 / BLUE GPIO2
inverted: true

# Enable time component to reset energy at midnight
time:
- platform: sntp                        # Uses NTP protocol for time information
  id: my_time                           # Uses my local time from compiling

text_sensor:
- platform: template
  name: ${friendly_name}_Uptime         # Enable Uptime-Sensor in readable format    
  id: uptime_readable
  icon: mdi:clock-start
- platform: version
  name: ${friendly_name}_version        # Show module Version in structure
- platform: wifi_info
  ip_address:
  name: ${friendly_name}_ip           # Show WIFI IP-address in structure
  ssid:
  name: ${friendly_name}_ssid         # Show WIFI SSID in structure
  bssid:
  name: ${friendly_name}_bssid        # Show WIFI BSSID in structure
</code></pre></div></details> <h2 id="teckin"><a href="#teckin" class="header-anchor">#</a> Teckin</h2> <h3 id="sp10"><a href="#sp10" class="header-anchor">#</a> SP10</h3> <details><summary> Vorlage anzeigen
</summary> <div class="language- extra-class"><pre><code>####
#
# Configuration File for TECKIN-SP10
#
# Notices:
# ========
# - You have to create a &quot;SECRETS.YAML&quot; first (!) and VALIDATE (!) this configuration before uploading to plug!!!
#
# Builddate: 14.04.2021 by X-R4Y
#
####
substitutions:
device_id:      teckin_sp10   # Device-ID Unique
device_name:    teckin_sp10   # Device-Type for Category
friendly_name:  teckin_sp10   # Device-Name for Channel

esphome:
name: $device_name
platform: ESP8266
board: esp01_1m
esp8266_restore_from_flash: true

wifi:
ssid:         !secret wifi_ssid
password:     !secret wifi_password
fast_connect: on

# Optional manual IP
#  manual_ip:
#    static_ip:  !secret ip_gosund_sp1
#    gateway:    !secret ip_gateway
#    subnet:     !secret ip_netmask
#    dns1:       !secret ip_dns_1
domain:       !secret ip_domain

# Enable fallback hotspot (captive portal) in case wifi connection fails
#  ap:
#    ssid: $device_name_Hotspot_Fallback
#    password: &quot;fallback&quot;

# Enable if you wish to have a minimalistic web-interface for your device
#web_server:
#  port: 80

logger:
# https://esphome.io/components/logger

api:
password: !secret api_password

ota:
password: !secret ota_password

sensor:
- platform: wifi_signal
  name: ${friendly_name}_WiFi_Information
  update_interval: 60s

- platform: uptime
  name: ${friendly_name}_Uptime_Information
  id: uptime_sensor
  update_interval: 60s
  on_raw_value:
  then:
  - text_sensor.template.publish:
  id: uptime_readable
  state: !lambda |-
  int seconds = round(id(uptime_sensor).raw_state);
  int days = seconds / (24 * 3600);
  seconds = seconds % (24 * 3600);
  int hours = seconds / 3600;
  seconds = seconds % 3600;
  int minutes = seconds /  60;
  seconds = seconds % 60;
  return (
  (days ? String(days) + &quot;d &quot; : &quot;&quot;) +
  (hours ? String(hours) + &quot;h &quot; : &quot;&quot;) +
  (minutes ? String(minutes) + &quot;m &quot; : &quot;&quot;) +
  (String(seconds) + &quot;s&quot;)
  ).c_str();

binary_sensor:
# Hardware Button at plug to turn on/off relay manually
- platform: gpio
  pin:
  number: GPIO13
  id: button
  name: ${friendly_name}_Button
  on_press:
  - switch.toggle: relay_template
    internal: True

output:
# https://esphome.io/components/output/esp8266_pwm.html
- platform: esp8266_pwm
  id: blue_led_output
  pin:
  number: GPIO2
  inverted: True

light:
# https://esphome.io/components/light/monochromatic.html
- platform: monochromatic
  name: blue_led
  output: blue_led_output
  id: blue_led
  default_transition_length: 1ms # default 1s
  internal: True

switch:
# Hardware Relay: Relay that triggers the output plug
- platform: gpio
  pin: GPIO15
  id: relay

- platform: template
  name: ${friendly_name}_Relay
  id: relay_template
  lambda: |-
  if (id(relay).state) {
  return true;
  } else {
  return false;
  }
  turn_on_action:
  - light.turn_on: blue_led   # Turns on blue LED while relay on
  - switch.turn_on: relay     # Turns relay on
    turn_off_action:
  - light.turn_off: blue_led  # Turns off blue LED while relay off
  - switch.turn_off: relay    # Turns relay off

# ==============
# !!! Notice !!!
# ==============
# If enabled, the Red LED will not light up while relay is in off-state!
# To disable the status LED feature put # in front of the following 4 lines
# If disabled, you wont get any error flashings on the LED from the plug.
status_led:
pin:
number: GPIO0                         # Default: RED GPIO0 / BLUE GPIO2
inverted: true

text_sensor:
- platform: template
  name: ${friendly_name}_Uptime         # Enable Uptime-Sensor in readable format    
  id: uptime_readable
  icon: mdi:clock-start
- platform: version
  name: ${friendly_name}_version        # Show module Version in structure
- platform: wifi_info
  ip_address:
  name: ${friendly_name}_ip           # Show WIFI IP-address in structure
  ssid:
  name: ${friendly_name}_ssid         # Show WIFI SSID in structure
  bssid:
  name: ${friendly_name}_bssid        # Show WIFI BSSID in structure
</code></pre></div></details> <h3 id="sp20"><a href="#sp20" class="header-anchor">#</a> SP20</h3> <details><summary> Vorlage anzeigen
</summary> <div class="language- extra-class"><pre><code>####
#
# Configuration File for TECKIN-SP20
# - If you switch from Tasmota - check if you have HLW8012 in your template then this config can be used.
#
# Notices:
# ========
# - You have to create a &quot;SECRETS.YAML&quot; first (!) and VALIDATE (!) this configuration before uploading to plug!!!
#
# Useful Links:
# ========
# Calibrate Power Source: https://frenck.dev/calibrating-an-esphome-flashed-power-plug/
# To finetune your wattage/voltage measurement, check the substitutions &quot;current_res / voltage_div&quot;
#
# Builddate: 14.04.2021 by X-R4Y
#
####
substitutions:
device_id:      teckin_sp20       # Device-ID Unique
device_name:    teckin_sp20       # Device-Type for Category
friendly_name:  Teckin_SP20       # Device-Name for Channel
current_res:    '0.001906'        # Higher value gives lower watt readout (Default 0.001906)
voltage_div:    '950'             # Lower value gives lower voltage readout

esphome:
name: $device_name
platform: ESP8266
board: esp01_1m
esp8266_restore_from_flash: true

wifi:
ssid:         !secret wifi_ssid
password:     !secret wifi_password
fast_connect: on

# Optional manual IP
#  manual_ip:
#    static_ip:  !secret ip_gosund_sp1_1
#    gateway:    !secret ip_gateway
#    subnet:     !secret ip_netmask
#    dns1:       !secret ip_dns_1
domain:       !secret ip_domain

# Enable fallback hotspot (captive portal) in case wifi connection fails
#  ap:
#    ssid: $device_name_Hotspot_Fallback
#    password: &quot;fallback&quot;

# Enable if you wish to have a minimalistic web-interface for your device
#web_server:
#  port: 80

logger:
# https://esphome.io/components/logger

api:
password: !secret api_password

ota:
password: !secret ota_password

sensor:
- platform: hlw8012
  # https://esphome.io/components/sensor/hlw8012.html
  # current, power, voltage can all use sensor options https://esphome.io/components/sensor/#config-sensor
  sel_pin:
  number: GPIO12
  inverted: True
  cf_pin: GPIO5
  cf1_pin: GPIO14

  current:
  name: ${friendly_name}_Current
  unit_of_measurement: A
  accuracy_decimals: 3

  power:
  name: ${friendly_name}_Power
  id: power_monitor_value
  unit_of_measurement: W
  accuracy_decimals: 2
  filters:
  - lambda: return (x / 2.2);

  voltage:
  name: ${friendly_name}_Voltage
  unit_of_measurement: V
  accuracy_decimals: 2
  current_resistor: $current_res
  voltage_divider: $voltage_div
  change_mode_every: 5            # default 8
  update_interval: 15s            # default 60s

  energy:
  name: ${friendly_name}_Energy
  unit_of_measurement: &quot;Wh&quot;

- platform: total_daily_energy
  name: ${friendly_name}_Total_Daily_Energy
  power_id: power_monitor_value
  filters:
  - multiply: 0.001         # convert Wh to kWh
    unit_of_measurement: kWh

- platform: wifi_signal
  name: ${friendly_name}_WiFi_Information
  update_interval: 60s

- platform: uptime
  name: ${friendly_name}_Uptime_Information
  id: uptime_sensor
  update_interval: 60s
  on_raw_value:
  then:
  - text_sensor.template.publish:
  id: uptime_readable
  state: !lambda |-
  int seconds = round(id(uptime_sensor).raw_state);
  int days = seconds / (24 * 3600);
  seconds = seconds % (24 * 3600);
  int hours = seconds / 3600;
  seconds = seconds % 3600;
  int minutes = seconds /  60;
  seconds = seconds % 60;
  return (
  (days ? String(days) + &quot;d &quot; : &quot;&quot;) +
  (hours ? String(hours) + &quot;h &quot; : &quot;&quot;) +
  (minutes ? String(minutes) + &quot;m &quot; : &quot;&quot;) +
  (String(seconds) + &quot;s&quot;)
  ).c_str();

binary_sensor:
# Hardware Button at plug to turn on/off relay manually
- platform: gpio
  pin:
  number: GPIO13
  id: button
  name: ${friendly_name}_Button
  on_press:
  - switch.toggle: relay_template
    internal: True

output:
# Hardware LEDs: Blue and Red, triggering on different states
- platform: gpio
  id: red_led_output    # Status LED RED
  pin:
  number: GPIO0
  inverted: True

- platform: gpio
  id: blue_led_output   # Status LED BLUE
  pin:
  number: GPIO2
  inverted: True

switch:
# Hardware Relay: Relay that triggers the output plug
- platform: gpio
  pin: GPIO4
  id: relay

- platform: template
  name: ${friendly_name}_Relay
  id: relay_template
  lambda: |-
  if (id(relay).state) {
  return true;
  } else {
  return false;
  }
  turn_on_action:
  - output.turn_on: blue_led_output   # Turns on blue LED while relay on
  - output.turn_off: red_led_output   # Turns off red LED while relay on
  - switch.turn_on: relay             # Turns relay on
    turn_off_action:
  - output.turn_off: blue_led_output  # Turns off blue LED while relay off
  - output.turn_on: red_led_output    # Turns on red LED while relay off
  - switch.turn_off: relay            # Turns relay off

# ==============
# !!! Notice !!!
# ==============
# If enabled, the Red LED will not light up while relay is in off-state!
# To disable the status LED feature put # in front of the following 4 lines
# If disabled, you wont get any error flashings on the LED from the plug.
#status_led:
#  pin:
#    number: GPIO0                         # Default: RED GPIO0 / BLUE GPIO2
#    inverted: true

# Enable time component to reset energy at midnight
time:
- platform: sntp                        # Uses NTP protocol for time information
  id: my_time                           # Uses my local time from compiling

text_sensor:
- platform: template
  name: ${friendly_name}_Uptime         # Enable Uptime-Sensor in readable format    
  id: uptime_readable
  icon: mdi:clock-start
- platform: version
  name: ${friendly_name}_version        # Show module Version in structure
- platform: wifi_info
  ip_address:
  name: ${friendly_name}_ip           # Show WIFI IP-address in structure
  ssid:
  name: ${friendly_name}_ssid         # Show WIFI SSID in structure
  bssid:
  name: ${friendly_name}_bssid        # Show WIFI BSSID in structure
</code></pre></div></details> <h2 id="sonoff"><a href="#sonoff" class="header-anchor">#</a> Sonoff</h2> <blockquote><p>ToDo&lt;</p></blockquote> <h2 id="shelly"><a href="#shelly" class="header-anchor">#</a> Shelly</h2> <blockquote><p>ToDo&lt;</p></blockquote> <h2 id="vansware"><a href="#vansware" class="header-anchor">#</a> Vansware</h2> <h3 id="vansware-plug-with-led-ring"><a href="#vansware-plug-with-led-ring" class="header-anchor">#</a> VANSWARE Plug (with LED Ring)</h3> <details><summary> Vorlage anzeigen
</summary> <div class="language- extra-class"><pre><code>####
#
# Configuration File for VANSWARE Plug (with LED Ring)
# - If you switch from Tasmota - check if you have BL0937 on GPIO5, then this config can be used.
#
# Notices:
# ========
# - You have to create a &quot;SECRETS.YAML&quot; first (!) and VALIDATE (!) this configuration before uploading to plug!!!
#
# Useful Links:
# ========
# Calibrate Power Source: https://frenck.dev/calibrating-an-esphome-flashed-power-plug/
#
# Builddate: 15.04.2021 by X-R4Y (alias V!P3R_76 @ Discord)
#
####

substitutions:
device_id:      vansware    # Device-ID Unique (only lowercase!)
device_name:    vansware    # Device-Type for Category (only lowercase!)
friendly_name:  vansware    # Device-Name for Channel (Lower-/Uppercase allowed)
current_res:    '0.001906'  # Higher value gives lower watt readout (Default 0.001906)
voltage_div:    '912'       # Lower value gives lower voltage readout (Default 912 ~ 226V)

esphome:
name: $device_name
platform: ESP8266
arduino_version: 2.5.1
board: esp8285

wifi:
ssid:         !secret wifi_ssid
password:     !secret wifi_password
fast_connect: on

# Optional manual IP
#  manual_ip:
#    static_ip:  !secret ip_vansware
#    gateway:    !secret ip_gateway
#    subnet:     !secret ip_netmask
#    dns1:       !secret ip_dns_1
domain:       !secret ip_domain

# Enable fallback hotspot (captive portal) in case wifi connection fails
#  ap:
#    ssid: $device_name_Hotspot_Fallback
#    password: &quot;fallback&quot;

# Enable if you wish to have a minimalistic web-interface for your device
web_server:
port: 80

api:
password: !secret api_password

ota:
password: !secret ota_password

logger:           # Reduce log level as otherwise logs would be flooded with analog sensor readings
logs:
sensor: ERROR # Options INFO / WARN / ERROR
adc: ERROR    # Options INFO / WARN / ERROR

sensor:
- platform: hlw8012
  # https://esphome.io/components/sensor/hlw8012.html
  # current, power, voltage can all use sensor options https://esphome.io/components/sensor/#config-sensor
  sel_pin:
  number: GPIO12
  inverted: True
  cf_pin: GPIO5
  cf1_pin: GPIO14

  current:
  name: ${friendly_name}_Current
  unit_of_measurement: A
  accuracy_decimals: 3

  power:
  name: ${friendly_name}_Power
  id: power_monitor_value
  unit_of_measurement: W
  accuracy_decimals: 2
  filters:
  - lambda: return (x / 2.2);

  voltage:
  name: ${friendly_name}_Voltage
  unit_of_measurement: V
  accuracy_decimals: 2
  current_resistor: $current_res  # default 0.001
  voltage_divider: $voltage_div   # default 2351
  change_mode_every: 3            # default 8
  update_interval: 10s            # default 60s

  energy:
  name: ${friendly_name}_Energy
  unit_of_measurement: &quot;Wh&quot;

- platform: total_daily_energy
  name: ${friendly_name}_Total_Daily_Energy
  power_id: power_monitor_value
  filters:
  - multiply: 0.001         # convert Wh to kWh
    unit_of_measurement: kWh

- platform: wifi_signal
  name: ${friendly_name}_WiFi_Information
  update_interval: 60s

- platform: uptime
  name: ${friendly_name}_Uptime_Information
  id: uptime_sensor
  update_interval: 60s
  on_raw_value:
  then:
  - text_sensor.template.publish:
  id: uptime_readable
  state: !lambda |-
  int seconds = round(id(uptime_sensor).raw_state);
  int days = seconds / (24 * 3600);
  seconds = seconds % (24 * 3600);
  int hours = seconds / 3600;
  seconds = seconds % 3600;
  int minutes = seconds /  60;
  seconds = seconds % 60;
  return (
  (days ? String(days) + &quot;d &quot; : &quot;&quot;) +
  (hours ? String(hours) + &quot;h &quot; : &quot;&quot;) +
  (minutes ? String(minutes) + &quot;m &quot; : &quot;&quot;) +
  (String(seconds) + &quot;s&quot;)
  ).c_str();

binary_sensor:
# Hardware Button at plug to turn on/off relay manually
- platform: gpio
  pin:
  number: GPIO13
  id: button
  name: ${friendly_name}_Button
  on_press:
  - switch.toggle: relay_template
    internal: True

output:
# Hardware LEDs: Blue and Red, triggering on different states
- platform: esp8266_pwm
  id: red_led
  pin:
  number: GPIO0
  inverted: true
- platform: esp8266_pwm
  id: green_led
  pin:
  number: GPIO4
  inverted: true
- platform: esp8266_pwm
  id: blue_led
  pin:
  number: GPIO2
  inverted: true

light:
- platform: monochromatic
  id: light1
  output: red_led
  name: ${friendly_name}_LED1_Red
- platform: monochromatic
  id: light2
  output: green_led
  name: ${friendly_name}_LED2_Green
- platform: monochromatic
  id: light3
  output: blue_led
  name: ${friendly_name}_LED3_Blue

switch:
# Hardware Relay: Relay that triggers the output plug
- platform: gpio
  pin: GPIO15
  id: relay

- platform: template
  name: ${friendly_name}_Relay
  id: relay_template
  lambda: |-
  if (id(relay).state) {
  return true;
  } else {
  return false;
  }
  turn_on_action:
  - output.turn_on: red_led           # Turns on blue LED while relay on
  - output.turn_off: green_led        # Turns off red LED while relay on
  - switch.turn_on: relay             # Turns relay on
    turn_off_action:
  - output.turn_off: red_led          # Turns off blue LED while relay off
  - output.turn_on: green_led         # Turns on red LED while relay off
  - switch.turn_off: relay            # Turns relay off

# ==============
# !!! Notice !!!
# ==============
# To disable the status LED feature put # in front of the following 4 lines
# If disabled, you wont get any error flashings on the LED from the plug.
status_led:
pin:
number: GPIO2                         # Default: RED GPIO0 / GREEN GPIO4 / BLUE GPIO2
inverted: true

# Enable time component to reset energy at midnight
time:
- platform: sntp                        # Uses NTP protocol for time information
  id: my_time                           # Uses my local time from compiling

text_sensor:
- platform: template
  name: ${friendly_name}_Uptime         # Enable Uptime-Sensor in readable format    
  id: uptime_readable
  icon: mdi:clock-start
- platform: version
  name: ${friendly_name}_version        # Show module Version in structure
- platform: wifi_info
  ip_address:
  name: ${friendly_name}_ip           # Show WIFI IP-address in structure
  ssid:
  name: ${friendly_name}_ssid         # Show WIFI SSID in structure
  bssid:
  name: ${friendly_name}_bssid        # Show WIFI BSSID in structure
</code></pre></div></details> <blockquote><p>ToDo&lt;</p></blockquote></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/DrozmotiX/documentation/edit/main/src/languages/de/Adapter/ESPHome/08.yamlTemplates.md" target="_blank" rel="noopener noreferrer">Sie k√∂nnen uns helfen, indem Sie diese Seite hier bearbeiten </a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">15.4.2021, 22:25:44</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/languages/de/Adapter/ESPHome/07.flashBinary.html" class="prev">
        Flashen per USB
      </a></span> <span class="next"><a href="/languages/de/Adapter/Klipper-Moonraker/02.adapterConfig.html">
        Adapter Konfiguration
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.03708dee.js" defer></script><script src="/assets/js/2.c6b024d0.js" defer></script><script src="/assets/js/32.9b407c87.js" defer></script>
  </body>
</html>
